<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: views/PacienteView.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: views/PacienteView.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import prompt from 'prompt-sync';
import Agenda from '../models/Agenda.js';
import { DateTime } from 'luxon';

const input = prompt();

/**
 * View responsável pela interação com o usuário sobre os pacientes.
 * @class
 */
export default {

    /**
     * Solicita os dados necessários para cadastrar um novo paciente.
     * O usuário é solicitado a inserir o CPF, nome e data de nascimento do paciente.
     * @async
     * @returns {Promise&lt;Object>} Retorna um objeto com as propriedades `cpf`, `nome`, e `dataNascimento`.
     */
    async obterDadosPaciente() {
        console.log('Cadastro de Paciente');
        const cpf = input('Digite o CPF: ');
        const nome = input('Digite o nome: ');
        const dataNascimento = input('Digite a data de nascimento (DD/MM/AAAA): ');
        return { cpf, nome, dataNascimento };
    },

    /**
     * Solicita o CPF de um paciente para excluir.
     * @async
     * @returns {Promise&lt;string>} Retorna o CPF do paciente a ser excluído.
     */
    async obterCpfPaciente() {
        console.log('Excluir Paciente');
        return input('Digite o CPF do paciente a ser excluído: ');
    },

    /**
     * Exibe a lista de pacientes com seus dados e consultas futuras.
     * Para cada paciente, exibe o CPF, nome, data de nascimento, idade e as consultas futuras agendadas.
     * Caso o paciente não tenha consultas futuras, exibe a mensagem "Sem consultas futuras."
     * @param {Array&lt;Paciente>} pacientes - Array de instâncias de `Paciente`.
     * @returns {void}
     */
    listarPacientes(pacientes) {
        console.log('------------------------------------------------------------');
        console.log('CPF         Nome                        Dt.Nasc.  Idade');
        console.log('------------------------------------------------------------');
    
        pacientes.forEach(paciente => {
            const idade = this.calcularIdade(paciente.getDataNascimento());
            console.log(`${paciente.getCPF()} ${paciente.getNome()} ${paciente.getDataNascimento()} ${idade}`);
            
            // Exibindo as consultas futuras
            const consultasFuturas = Agenda.getInstance().getConsultas().filter(consulta => 
                consulta.getPaciente().getCPF() === paciente.getCPF() &amp;&amp; 
                DateTime.fromFormat(consulta.getDataConsulta(), 'dd/MM/yyyy') > DateTime.now()
            );
            
            if (consultasFuturas.length > 0) {
                consultasFuturas.forEach(consulta => {
                    console.log(`Agendado para: ${consulta.getDataConsulta()} ${consulta.getHoraInicio()} às ${consulta.getHoraFim()}`);
                });
            } else {
                console.log('Sem consultas futuras.');
            }
        });
    },

    /**
     * Calcula a idade de um paciente com base na sua data de nascimento.
     * @param {string} dataNascimento - A data de nascimento do paciente no formato 'DD/MM/AAAA'.
     * @returns {number} Retorna a idade do paciente.
     */
    calcularIdade(dataNascimento) {
        const hoje = DateTime.local();
        const nascimento = DateTime.fromFormat(dataNascimento, 'dd/MM/yyyy');
        return hoje.year - nascimento.year - (hoje &lt; nascimento.plus({ years: hoje.year - nascimento.year }) ? 1 : 0);
    },

    /**
     * Exibe uma mensagem de erro para o usuário.
     * @param {string} erro - A mensagem de erro a ser exibida.
     * @returns {void}
     */
    mostrarErro(erro) {
        console.log(`Erro: ${erro}`);
    },

    /**
     * Exibe uma mensagem de sucesso ou outra informação para o usuário.
     * @param {string} mensagem - A mensagem a ser exibida.
     * @returns {void}
     */
    mostrarMensagem(mensagem) {
        console.log(mensagem);
    }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Agenda.html">Agenda</a></li><li><a href="Consulta.html">Consulta</a></li><li><a href="ConsultaController.html">ConsultaController</a></li><li><a href="Paciente.html">Paciente</a></li><li><a href="PacienteController.html">PacienteController</a></li><li><a href="module.exports.html">exports</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Nov 21 2024 20:07:37 GMT-0300 (Horário Padrão de Brasília)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
